<!--

    Copyright (c) 2016, All partners of the iTesla project (http://www.itesla-project.eu/consortium)
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.

-->
<div class="modal-header">
    <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h4 class="modal-title">Create workflow</h4>
</div>
<div class="modal-body">
    <form role="form" name="workflow">
        <div class="form-group {{workflow.workflowid.$valid === false ? 'has-error' : ''}}">
            <label class="control-label">Workflow ID</label>
            <p class="input-group">
                <input type="text" name="workflowid" class="form-control" ng-model="params.id"/>
            </p>
        </div>
        <div class="form-group {{workflow.baseCaseDate.$valid === false ? 'has-error' : ''}}">
            <label class="control-label">Base case date and time</label>
            <p class="input-group">
                <input type="date" name="baseCaseDate" class="form-control" 
                       datepicker-popup="{{'dd-MM-yyyy'}}" ng-model="params.baseCaseDate" 
                       is-open="baseCaseOpened" required close-text="Close" />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="baseCaseOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </p>
            <p class="input-group">
                <timepicker ng-model="params.baseCaseDate" hour-step="1" minute-step="1" show-meridian="false"></timepicker>
            </p>
        </div>
        <div class="form-group {{workflow.histoStartDate.$valid === false ? 'has-error' : ''}}">
            <label class="control-label">History start date</label>
            <p class="input-group">
                <input type="date" name="histoStartDate" class="form-control" 
                       datepicker-popup="{{'dd-MM-yyyy'}}" ng-model="params.histoInterval.start" 
                       is-open="histoStartOpened" required close-text="Close" />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="histoStartOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </p>
        </div>
        <div class="form-group {{workflow.histoEndDate.$valid === false ? 'has-error' : ''}}">
            <label class="control-label">History end date</label>
            <p class="input-group">
                <input type="date" name="histoEndDate" class="form-control" 
                       datepicker-popup="{{'dd-MM-yyyy'}}" ng-model="params.histoInterval.end" 
                       is-open="histoEndOpened" required close-text="Close" />
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="histoEndOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                </span>
            </p>
        </div>
        <div class="form-group {{workflow.countries.$valid === false ? 'has-error' : ''}}">
            <label class="control-label">Countries</label>
            <input type="number" name="countries" ng-model="params.countries.length" min="1" ng-hide="true" />
            <div ng-dropdown-multiselect selected-model="params.countries"
                options="countries" extra-settings="countrySelectSettings">
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-default test_create_workflow_cancel" ng-click="cancel()">Cancel</button>
    <button type="button" class="btn btn-primary test_create_workflow_ok" ng-click="ok()" ng-disabled="!workflow.$valid">OK</button>
</div>
